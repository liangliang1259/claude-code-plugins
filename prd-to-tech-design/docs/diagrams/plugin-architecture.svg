<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 28px; font-weight: bold; fill: #333; }
      .label { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 14px; fill: #333; }
      .small-label { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 12px; fill: #666; }
      .box { stroke: #333; stroke-width: 2; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .dashed { stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666" />
    </marker>
  </defs>

  <!-- 背景 -->
  <rect width="1200" height="800" fill="#f8f9fa"/>

  <!-- 标题 -->
  <text x="600" y="40" text-anchor="middle" class="title">PRD转技术方案生成器 - 插件架构</text>

  <!-- Claude Code边界 -->
  <rect x="50" y="80" width="1100" height="680" fill="#e3f2fd" stroke="#1976d2" stroke-width="3" rx="10"/>
  <text x="100" y="110" class="label" font-weight="bold" fill="#1976d2">Claude Code 插件环境</text>

  <!-- 用户层 -->
  <rect x="100" y="140" width="1000" height="80" fill="#fff3e0" stroke="#ff9800" class="box" rx="5"/>
  <text x="600" y="175" text-anchor="middle" class="label" font-weight="bold">用户层</text>
  <text x="600" y="200" text-anchor="middle" class="small-label">用户输入命令 /prd-to-tech-design:generate-tech-design</text>

  <!-- 命令层 -->
  <rect x="100" y="250" width="1000" height="120" fill="#e8f5e9" stroke="#4caf50" class="box" rx="5"/>
  <text x="600" y="280" text-anchor="middle" class="label" font-weight="bold">命令层 (Commands)</text>

  <rect x="150" y="300" width="200" height="50" fill="#c8e6c9" stroke="#4caf50" class="box" rx="3"/>
  <text x="250" y="330" text-anchor="middle" class="label">generate-tech-design.md</text>

  <rect x="450" y="300" width="200" height="50" fill="#c8e6c9" stroke="#4caf50" class="box" rx="3"/>
  <text x="550" y="330" text-anchor="middle" class="label">config-feishu.md</text>

  <rect x="750" y="300" width="200" height="50" fill="#c8e6c9" stroke="#4caf50" class="box" rx="3"/>
  <text x="850" y="330" text-anchor="middle" class="label">其他扩展命令</text>

  <!-- Agent层 -->
  <rect x="100" y="400" width="1000" height="120" fill="#f3e5f5" stroke="#9c27b0" class="box" rx="5"/>
  <text x="600" y="430" text-anchor="middle" class="label" font-weight="bold">代理层 (Agents)</text>

  <rect x="200" y="450" width="250" height="50" fill="#e1bee7" stroke="#9c27b0" class="box" rx="3"/>
  <text x="325" y="480" text-anchor="middle" class="label">prd-analyzer.md</text>

  <rect x="550" y="450" width="250" height="50" fill="#e1bee7" stroke="#9c27b0" class="box" rx="3"/>
  <text x="675" y="480" text-anchor="middle" class="label">tech-design-generator.md</text>

  <!-- 技能层 -->
  <rect x="100" y="550" width="1000" height="80" fill="#fff8e1" stroke="#ffc107" class="box" rx="5"/>
  <text x="600" y="585" text-anchor="middle" class="label" font-weight="bold">技能层 (Skills)</text>
  <rect x="350" y="595" width="300" height="25" fill="#ffecb3" stroke="#ffc107" class="box" rx="3"/>
  <text x="500" y="613" text-anchor="middle" class="small-label">prd-analysis/SKILL.md</text>

  <!-- 工具库层 -->
  <rect x="100" y="660" width="1000" height="80" fill="#fce4ec" stroke="#e91e63" class="box" rx="5"/>
  <text x="600" y="690" text-anchor="middle" class="label" font-weight="bold">工具库层 (Lib)</text>

  <rect x="150" y="705" width="140" height="25" fill="#f8bbd0" stroke="#e91e63" class="box" rx="3"/>
  <text x="220" y="722" text-anchor="middle" class="small-label">feishu_client.py</text>

  <rect x="310" y="705" width="120" height="25" fill="#f8bbd0" stroke="#e91e63" class="box" rx="3"/>
  <text x="370" y="722" text-anchor="middle" class="small-label">prd_parser.py</text>

  <rect x="450" y="705" width="100" height="25" fill="#f8bbd0" stroke="#e91e63" class="box" rx="3"/>
  <text x="500" y="722" text-anchor="middle" class="small-label">utils.py</text>

  <rect x="570" y="705" width="180" height="25" fill="#f8bbd0" stroke="#e91e63" class="box" rx="3"/>
  <text x="660" y="722" text-anchor="middle" class="small-label">tech_design_template.md</text>

  <!-- 箭头连接 -->
  <line x1="250" y1="220" x2="250" y2="250" class="arrow"/>
  <line x1="550" y1="220" x2="550" y2="250" class="arrow"/>

  <line x1="250" y1="350" x2="325" y2="400" class="arrow"/>
  <line x1="325" y1="500" x2="675" y2="500" class="arrow"/>
  <line x1="675" y1="500" x2="675" y2="550" class="arrow" stroke-dasharray="5,5"/>

  <line x1="600" y1="370" x2="600" y2="400" class="arrow" stroke-dasharray="5,5"/>
  <line x1="600" y1="520" x2="600" y2="550" class="arrow" stroke-dasharray="5,5"/>
  <line x1="600" y1="630" x2="600" y2="660" class="arrow"/>

  <!-- 数据源 -->
  <rect x="1050" y="300" width="80" height="200" fill="#e0f7fa" stroke="#00bcd4" class="box" rx="5"/>
  <text x="1090" y="385" text-anchor="middle" class="label" transform="rotate(90, 1090, 385)">数据源</text>
  <text x="1085" y="330" text-anchor="middle" class="small-label" transform="rotate(90, 1085, 330)">本地文件</text>
  <text x="1090" y="370" text-anchor="middle" class="small-label" transform="rotate(90, 1090, 370)">飞书文档</text>
  <text x="1095" y="410" text-anchor="middle" class="small-label" transform="rotate(90, 1095, 410)">粘贴内容</text>

  <line x1="1050" y1="350" x2="950" y2="325" class="arrow"/>

  <!-- 输出 -->
  <rect x="1050" y="680" width="80" height="50" fill="#e0f2f1" stroke="#009688" class="box" rx="5"/>
  <text x="1090" y="710" text-anchor="middle" class="label" transform="rotate(90, 1090, 710)">输出</text>
  <line x1="950" y1="700" x2="1050" y2="705" class="arrow"/>

</svg>
